---
layout: default
title: 記事一覧
---
<h1>記事一覧</h1>
<div class="articles">
  {% for post in site.posts %}
  <article style="padding-top: 20px; padding-bottom: 20px;">
    <h2><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h2>
    <div>
      {{ post.content | strip_html | slice: 0, 500 }}
    </div>
    <hr>
  </article>
  {% endfor %}
</div>
<div id="prev-page" style="float: left;"><a href="" id="prev-page-link">←新しい記事</a></div>
<div id="next-page" style="text-align: right;"><a href="" id="next-page-link">古い記事→</a></div>


<script>
 (function () {
   var offset = 10;

   var movePage = () => {
     var currentPage;
     if (location.hash === '' || location.hash === '#') {
       currentPage = 0;
     } else {
       currentPage = parseInt(location.hash.substring(1));
     }
     if (isNaN(currentPage)) {
       location.href = '/';
       return;
     }

     Array.prototype.forEach.call(document.getElementsByTagName('article'),
                                  (e) => e.style.display = 'none');

     var start_index = offset * currentPage;
     Array.prototype.slice.call(document.getElementsByTagName('article'),
                                start_index, start_index + offset)
          .forEach((e) => e.style.display = 'block');
     if (currentPage > 0) {
       document.getElementById('prev-page-link')
               .setAttribute('href', '#' + (currentPage - 1));
       document.getElementById('prev-page').style.display = 'block';
     } else {
       document.getElementById('prev-page').style.display = 'none';
     }
     var num_articles = document.getElementsByTagName('article').length;
     if (offset * (currentPage + 1) < num_articles) {
       document.getElementById('next-page-link')
               .setAttribute('href', '#' + (currentPage + 1));
       document.getElementById('next-page').style.display = 'block';
     } else {
       document.getElementById('next-page').style.display = 'none';
     }
   };

   if (document.readyState !== 'loading') {
     movePage();
   } else {
     document.addEventListener('DOMContentLoaded', () => movePage());
   }

   window.addEventListener('hashchange', () => {
     movePage();
     window.scrollTo(0, 0);
   });
 })();
</script>
