---
layout: post
title: Gaucheでデバッグ
tags:
- Gauche

---
{% raw %}
<p><a href="http://practical-scheme.net/gauche/man/gauche-refj_16.html#g_t_00e3_0083_0087_00e3_0083_0090_00e3_0083_0083_00e3_0082_00b0">Gauche Users&rsquo; Reference: Top</a></p><p>上のサイトを見る限り、printf<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%C3%A5%B0">デバッグ</a>的なことをするためには#?= #?,の2つの構文が使えるようです。</p><p>とりあえず#?=の使用例。</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink>gosh&gt; <span class="synSpecial">(</span><span class="synStatement">define</span> <span class="synSpecial">(</span>foo x<span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synIdentifier">+</span> x <span class="synConstant">1</span><span class="synSpecial">))</span>
foo
gosh&gt; <span class="synError">#?=</span><span class="synSpecial">(</span>foo <span class="synConstant">3</span><span class="synSpecial">)</span>
<span class="synError">#?=</span><span class="synConstant">&quot;(standard input)&quot;</span>:21:<span class="synSpecial">(</span>foo <span class="synConstant">3</span><span class="synSpecial">)</span>
<span class="synError">#?-</span>    <span class="synConstant">4</span>
<span class="synConstant">4</span>
gosh&gt; <span class="synSpecial">(</span>foo <span class="synError">#?=</span><span class="synSpecial">(</span>foo <span class="synConstant">3</span><span class="synSpecial">))</span>
<span class="synError">#?=</span><span class="synConstant">&quot;(standard input)&quot;</span>:22:<span class="synSpecial">(</span>foo <span class="synConstant">3</span><span class="synSpecial">)</span>
<span class="synError">#?-</span>    <span class="synConstant">4</span>
<span class="synConstant">5</span>
</pre><pre class="code lang-scheme" data-lang="scheme" data-unlink>gosh&gt; <span class="synSpecial">(</span><span class="synStatement">define</span> <span class="synSpecial">(</span>fact n<span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synIdentifier">=</span> n <span class="synConstant">0</span><span class="synSpecial">)</span> <span class="synConstant">1</span> <span class="synSpecial">(</span><span class="synIdentifier">*</span> n <span class="synError">#?=</span><span class="synSpecial">(</span>fact <span class="synSpecial">(</span><span class="synIdentifier">-</span> n <span class="synConstant">1</span><span class="synSpecial">)))))</span>
fact
gosh&gt; <span class="synSpecial">(</span>fact <span class="synConstant">3</span><span class="synSpecial">)</span>
<span class="synError">#?=</span><span class="synConstant">&quot;(standard input)&quot;</span>:27:<span class="synSpecial">(</span>fact <span class="synSpecial">(</span><span class="synIdentifier">-</span> n <span class="synConstant">1</span><span class="synSpecial">))</span>
<span class="synError">#?=</span><span class="synConstant">&quot;(standard input)&quot;</span>:27:<span class="synSpecial">(</span>fact <span class="synSpecial">(</span><span class="synIdentifier">-</span> n <span class="synConstant">1</span><span class="synSpecial">))</span>
<span class="synError">#?=</span><span class="synConstant">&quot;(standard input)&quot;</span>:27:<span class="synSpecial">(</span>fact <span class="synSpecial">(</span><span class="synIdentifier">-</span> n <span class="synConstant">1</span><span class="synSpecial">))</span>
<span class="synError">#?-</span>    <span class="synConstant">1</span>
<span class="synError">#?-</span>    <span class="synConstant">1</span>
<span class="synError">#?-</span>    <span class="synConstant">2</span>
<span class="synConstant">6</span> 
</pre><p><s>次に#?,を使ってみようとしましたが……</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink><span class="synSpecial">(</span><span class="synStatement">define</span> <span class="synSpecial">(</span>fact n<span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synIdentifier">=</span> n <span class="synConstant">0</span><span class="synSpecial">)</span> <span class="synConstant">1</span> <span class="synSpecial">(</span><span class="synIdentifier">*</span> n <span class="synError">#?,</span><span class="synSpecial">(</span>fact <span class="synSpecial">(</span><span class="synIdentifier">-</span> n <span class="synConstant">1</span><span class="synSpecial">)))))</span>
<span class="synConstant">***</span> READ-ERROR: <span class="synIdentifier">Read</span> error at <span class="synConstant">&quot;(standard input)&quot;</span>:line <span class="synError">32:</span> unsupported <span class="synError">#?-syntax:</span> <span class="synError">#?,</span>
</pre><p>ちなみに、#?,はdebug-funcallの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%F3%A5%BF%A5%C3%A5%AF%A5%B9">シンタックス</a>シュガーであると書かれていますが、そのdebug-funcall自体もありません。<br />
バージョン違いのせいでしょうか？</p>
<pre class="code" data-lang="" data-unlink>$ gosh -V
Gauche scheme shell, version 0.9.4 [utf-8,pthreads], x86_64-unknown-linux-gnu</pre><p>ちなみに上のサイトのトップを見てみたところ、</p>

    <blockquote>
        <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Gauche">Gauche</a> ユーザリファレンス</p><p>本書は、R7RS準拠の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Scheme">Scheme</a>処理系、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Gauche">Gauche</a>のリファレンスマニュアルです。 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Gauche">Gauche</a>のバージョン0.9.4に対応します。</p>

    </blockquote>
<p>……………。<br />
結局原因はわからないまま。</s></p><p>2016/10/29 追記: #?, は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Gauche">Gauche</a> 0.9.5以降の機能のようです。</p>


{% endraw %}
