---
layout: post
title: OCaml初心者が戸惑いそうな謎記号一覧
tags:
- OCaml

---
{% raw %}

<div class="section">
    <h3>^(キャレット)</h3>
    <p>^は文字列連結の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a>です。</p>
<pre class="code lang-ocaml" data-lang="ocaml" data-unlink><span class="synPreProc">#</span> <span class="synConstant">&quot;hoge&quot;</span> <span class="synStatement">^</span> <span class="synConstant">&quot;fuga&quot;</span><span class="synStatement">;;</span>
- : <span class="synType">string</span> <span class="synStatement">=</span> <span class="synConstant">&quot;hogefuga&quot;</span>
</pre>
</div>
<div class="section">
    <h3>+., -., *., /.</h3>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C9%E2%C6%B0%BE%AE%BF%F4%C5%C0%BF%F4">浮動小数点数</a>同士の演算には、元の演算の記号の後にドットが付きます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Scheme">Scheme</a>と同じですね。</p>
<pre class="code lang-ocaml" data-lang="ocaml" data-unlink><span class="synPreProc">#</span> <span class="synConstant">3.0</span> +. <span class="synConstant">4.0</span><span class="synStatement">;;</span>
- : <span class="synType">float</span> <span class="synStatement">=</span> <span class="synConstant">7</span>.
</pre>
</div>
<div class="section">
    <h3><></h3>
    <p><>はノットイコールを表します。これは<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>やCoqなどと同じなので、見慣れている人もいるかもしれません。</p>
<pre class="code" data-lang="" data-unlink># &#34;hoge&#34; &lt;&gt; &#34;fuga&#34;;;
- : bool = true</pre>
</div>
<div class="section">
    <h3>@(アットマーク)</h3>
    <p>@はリストの連結を表します。ちなみにリストの要素の区切りはカンマではなくセミコロンです。</p>
<pre class="code lang-ocaml" data-lang="ocaml" data-unlink><span class="synPreProc">#</span> <span class="synStatement">[</span><span class="synConstant">1</span><span class="synStatement">;</span> <span class="synConstant">2</span><span class="synStatement">;</span> <span class="synConstant">3</span><span class="synStatement">]</span> @ <span class="synStatement">(</span><span class="synConstant">4</span> <span class="synStatement">::</span> <span class="synConstant">5</span> <span class="synStatement">::</span> <span class="synConstant">6</span> <span class="synStatement">::</span> <span class="synConstant">[]</span><span class="synStatement">);;</span>
- : <span class="synType">int</span> <span class="synType">list</span> <span class="synStatement">=</span> <span class="synStatement">[</span><span class="synConstant">1</span><span class="synStatement">;</span> <span class="synConstant">2</span><span class="synStatement">;</span> <span class="synConstant">3</span><span class="synStatement">;</span> <span class="synConstant">4</span><span class="synStatement">;</span> <span class="synConstant">5</span><span class="synStatement">;</span> <span class="synConstant">6</span><span class="synStatement">]</span>
</pre>
</div>
<div class="section">
    <h3>'(シングルクォーテーション)</h3>
    <p>識別子の前に付く'は、その識別子が型変数であることを表します。</p>
<pre class="code lang-ocaml" data-lang="ocaml" data-unlink><span class="synPreProc">#</span> <span class="synStatement">let</span> identity <span class="synStatement">(</span>x : 'a<span class="synStatement">)</span> : 'a <span class="synStatement">=</span> x<span class="synStatement">;;</span>
<span class="synStatement">val</span> identity : 'a <span class="synStatement">-&gt;</span> 'a <span class="synStatement">=</span> <span class="synStatement">&lt;fun&gt;</span>
<span class="synPreProc">#</span> identity <span class="synConstant">3</span><span class="synStatement">;;</span>
- : <span class="synType">int</span> <span class="synStatement">=</span> <span class="synConstant">3</span>
<span class="synPreProc">#</span> identity <span class="synConstant">'a'</span><span class="synStatement">;;</span>
- : <span class="synType">char</span> <span class="synStatement">=</span> <span class="synConstant">'a'</span>
</pre>
</div>
<div class="section">
    <h3>`(バッククォーテーション)</h3>
    <p>識別子の前に付く`は、多相バリアントのコンストラクタを表します。</p>
<pre class="code lang-ocaml" data-lang="ocaml" data-unlink><span class="synPreProc">#</span> <span class="synStatement">function</span> <span class="synStatement">|</span> <span class="synConstant">`Ok</span> a <span class="synStatement">-&gt;</span> string_of_int a <span class="synStatement">|</span> <span class="synConstant">`Ng</span> <span class="synStatement">-&gt;</span> <span class="synConstant">&quot;&lt;error&gt;&quot;</span><span class="synStatement">;;</span>
- : <span class="synStatement">[&lt;</span> <span class="synConstant">`Ng</span> <span class="synStatement">|</span> <span class="synConstant">`Ok</span> <span class="synStatement">of</span> <span class="synType">int</span> <span class="synStatement">]</span> <span class="synStatement">-&gt;</span> <span class="synType">string</span> <span class="synStatement">=</span> <span class="synStatement">&lt;fun&gt;</span>
</pre><p>この関数は、`Ok of intまたは`Ngの2つ(未満)のコンストラクタからなるある種の匿名型のようなものを引数に受け取っています。</p>

</div>
<div class="section">
    <h3>[> .. ]</h3>
    <p>これも多相バリアントの記号です。</p><p>型[> `A | `B ]は、少なくとも`A, `Bの2つのコンストラクタからなる匿名型(のようなもの)を表します。</p>
<pre class="code lang-ocaml" data-lang="ocaml" data-unlink><span class="synPreProc">#</span> <span class="synStatement">let</span> <span class="synStatement">(</span>x : <span class="synStatement">[&gt;</span> <span class="synConstant">`A</span> <span class="synStatement">|</span> <span class="synConstant">`B</span><span class="synStatement">])</span> <span class="synStatement">=</span> <span class="synConstant">`B</span><span class="synStatement">;;</span>
<span class="synStatement">val</span> x : <span class="synStatement">[&gt;</span> <span class="synConstant">`A</span> <span class="synStatement">|</span> <span class="synConstant">`B</span> <span class="synStatement">]</span> <span class="synStatement">=</span> <span class="synConstant">`B</span>
<span class="synPreProc">#</span> <span class="synStatement">let</span> <span class="synStatement">(</span>x : <span class="synStatement">[&gt;</span> <span class="synConstant">`A</span> <span class="synStatement">|</span> <span class="synConstant">`B</span><span class="synStatement">])</span> <span class="synStatement">=</span> <span class="synConstant">`C</span><span class="synStatement">;;</span> <span class="synComment">(* `A, `B 以外のコンストラクタも許す *)</span>
<span class="synStatement">val</span> x : <span class="synStatement">[&gt;</span> <span class="synConstant">`A</span> <span class="synStatement">|</span> <span class="synConstant">`B</span> <span class="synStatement">|</span> <span class="synConstant">`C</span> <span class="synStatement">]</span> <span class="synStatement">=</span> <span class="synConstant">`C</span>
</pre>
</div>
<div class="section">
    <h3>[< .. ]</h3>
    <p>これも多相バリアントの記号です。</p><p>型[< `A | `B ]は、`A, `Bの2つのコンストラクタまたはその一部からなる匿名型(のようなもの)を表します。</p>
<pre class="code lang-ocaml" data-lang="ocaml" data-unlink><span class="synPreProc">#</span> <span class="synStatement">let</span> f <span class="synStatement">=</span> <span class="synStatement">function</span> <span class="synStatement">|</span> <span class="synConstant">`A</span> <span class="synStatement">-&gt;</span> <span class="synConstant">&quot;A&quot;</span> <span class="synStatement">|</span> <span class="synConstant">`B</span> <span class="synStatement">-&gt;</span> <span class="synConstant">&quot;B&quot;</span><span class="synStatement">;;</span>
<span class="synStatement">val</span> f : <span class="synStatement">[&lt;</span> <span class="synConstant">`A</span> <span class="synStatement">|</span> <span class="synConstant">`B</span> <span class="synStatement">]</span> <span class="synStatement">-&gt;</span> <span class="synType">string</span> <span class="synStatement">=</span> <span class="synStatement">&lt;fun&gt;</span>
<span class="synPreProc">#</span> <span class="synStatement">let</span> x : <span class="synStatement">[</span><span class="synConstant">`A</span><span class="synStatement">]</span> <span class="synStatement">=</span> <span class="synConstant">`A</span><span class="synStatement">;;</span>
<span class="synStatement">val</span> x : <span class="synStatement">[</span> <span class="synConstant">`A</span> <span class="synStatement">]</span> <span class="synStatement">=</span> <span class="synConstant">`A</span>
<span class="synPreProc">#</span> f x<span class="synStatement">;;</span> <span class="synComment">(* f の引数の型の部分集合を引数に与えてもOK *)</span>
- : <span class="synType">string</span> <span class="synStatement">=</span> <span class="synConstant">&quot;A&quot;</span>
<span class="synPreProc">#</span> f <span class="synConstant">`C</span><span class="synStatement">;;</span> <span class="synComment">(* `C は f の引数型に含まれないので☓ *)</span>
</pre>
</div>
<div class="section">
    <h3>その他</h3>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/OCaml">OCaml</a>では独自の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a>を定義することもできます。意味不明な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B1%E9%BB%BB%BB%D2">演算子</a>があった場合はライブラリのドキュメントを参照してみましょう。</p>
<pre class="code lang-ocaml" data-lang="ocaml" data-unlink><span class="synPreProc">#</span> <span class="synStatement">let</span> <span class="synStatement">(</span>++<span class="synStatement">)</span> x y <span class="synStatement">=</span> x @ y<span class="synStatement">;;</span>
<span class="synStatement">val</span> <span class="synStatement">(</span> ++ <span class="synStatement">)</span> : 'a <span class="synType">list</span> <span class="synStatement">-&gt;</span> 'a <span class="synType">list</span> <span class="synStatement">-&gt;</span> 'a <span class="synType">list</span> <span class="synStatement">=</span> <span class="synStatement">&lt;fun&gt;</span>
<span class="synPreProc">#</span> <span class="synStatement">[</span><span class="synConstant">'h'</span><span class="synStatement">;</span> <span class="synConstant">'e'</span><span class="synStatement">;</span> <span class="synConstant">'l'</span><span class="synStatement">]</span> ++ <span class="synStatement">[</span><span class="synConstant">'l'</span><span class="synStatement">;</span> <span class="synConstant">'o'</span><span class="synStatement">;</span> <span class="synConstant">'!'</span><span class="synStatement">];;</span>
- : <span class="synType">char</span> <span class="synType">list</span> <span class="synStatement">=</span> <span class="synStatement">[</span><span class="synConstant">'h'</span><span class="synStatement">;</span> <span class="synConstant">'e'</span><span class="synStatement">;</span> <span class="synConstant">'l'</span><span class="synStatement">;</span> <span class="synConstant">'l'</span><span class="synStatement">;</span> <span class="synConstant">'o'</span><span class="synStatement">;</span> <span class="synConstant">'!'</span><span class="synStatement">]</span>
</pre>
</div>

{% endraw %}
