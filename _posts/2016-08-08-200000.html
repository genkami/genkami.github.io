---
layout: post
title: ImplicitParamをConstraintとして扱う
tags:
- Haskell

---
{% raw %}
<p>=>の左側に来るものはすべてConstraintなので、暗黙引数をConstraintとして扱うこともできます。</p>
<pre class="code lang-haskell" data-lang="haskell" data-unlink><span class="synSpecial">{-# LANGUAGE ConstraintKinds, ImplicitParams #-}</span>

<span class="synType">type</span> Showable t <span class="synStatement">=</span> <span class="synStatement">?</span>show <span class="synStatement">::</span> t <span class="synStatement">-&gt;</span> String

print' <span class="synStatement">::</span> Showable t <span class="synStatement">=&gt;</span> t <span class="synStatement">-&gt;</span> IO ()
print' a <span class="synStatement">=</span> putStrLn <span class="synStatement">$</span> <span class="synStatement">?</span>show a

<span class="synType">data</span> MyData <span class="synStatement">=</span> MyStr String

showData <span class="synStatement">::</span> MyData <span class="synStatement">-&gt;</span> String
showData (MyStr s) <span class="synStatement">=</span> <span class="synConstant">&quot;MyData: &quot;</span> <span class="synStatement">++</span> s


hoge <span class="synStatement">::</span> IO ()
hoge <span class="synStatement">=</span> <span class="synStatement">do</span>
  print' <span class="synStatement">$</span> MyStr <span class="synConstant">&quot;hoge&quot;</span>
  print' <span class="synStatement">$</span> MyStr <span class="synConstant">&quot;fuga&quot;</span>
  print' <span class="synStatement">$</span> MyStr <span class="synConstant">&quot;foo&quot;</span>
  <span class="synType">where</span> <span class="synStatement">?</span>show <span class="synStatement">=</span> showData
</pre><p>このような書き方を実際にすることは無いと思いますが、こうしてみると型クラスと暗黙引数渡しの関係がよく分かってきますね。</p>


{% endraw %}
