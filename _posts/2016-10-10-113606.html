---
layout: post
title: Gaucheでreturn文
tags:
- Gauche

---
{% raw %}
<p>return文のようなものは比較的簡単に作れますが、念の為覚え書き。</p><p>値を返したい位置の継続を受け取って、returnするかわりにその継続に戻り値を渡します。</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink><span class="synSpecial">(</span>use gauche.collection<span class="synSpecial">)</span>

<span class="synComment">;; xsとysのすべての要素が等しければ#t, そうでなければ#f</span>
<span class="synSpecial">(</span><span class="synStatement">define</span> <span class="synSpecial">(</span>vector-equal? xs ys<span class="synSpecial">)</span>
  <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synIdentifier">not</span> <span class="synSpecial">(</span><span class="synIdentifier">eq?</span> <span class="synSpecial">(</span><span class="synIdentifier">vector-length</span> xs<span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synIdentifier">vector-length</span> ys<span class="synSpecial">)))</span>
      <span class="synConstant">#f</span>
      <span class="synSpecial">(</span>let/cc return
        <span class="synSpecial">(</span><span class="synIdentifier">for-each</span>
         <span class="synSpecial">(</span>^<span class="synSpecial">(</span>x y<span class="synSpecial">)</span>
           <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synIdentifier">not</span> <span class="synSpecial">(</span><span class="synIdentifier">equal?</span> x y<span class="synSpecial">))</span>
               <span class="synSpecial">(</span>return <span class="synConstant">#f</span><span class="synSpecial">)))</span>
         xs ys<span class="synSpecial">)</span>
        <span class="synConstant">#t</span><span class="synSpecial">)))</span>
</pre><p>実行結果</p>
<pre class="code lang-scheme" data-lang="scheme" data-unlink>gosh&gt; <span class="synSpecial">(</span>vector-equal? <span class="synSpecial">#(</span><span class="synConstant">1</span> <span class="synConstant">2</span> <span class="synConstant">3</span><span class="synSpecial">)</span> <span class="synSpecial">#(</span><span class="synConstant">1</span> <span class="synConstant">2</span> <span class="synConstant">3</span><span class="synSpecial">))</span>
<span class="synConstant">#t</span>
gosh&gt; <span class="synSpecial">(</span>vector-equal? <span class="synSpecial">#(</span><span class="synConstant">1</span> <span class="synConstant">2</span> <span class="synConstant">3</span><span class="synSpecial">)</span> <span class="synSpecial">#(</span><span class="synConstant">4</span> <span class="synConstant">5</span> <span class="synConstant">6</span><span class="synSpecial">))</span>
<span class="synConstant">#f</span>
</pre>

{% endraw %}
