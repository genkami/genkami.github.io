---
layout: post
title: Pyenvとvirtualenvで環境の管理
tags:
- Python

---
{% raw %}
<p>『<a href="http://d.hatena.ne.jp/asin/4048686291/cloudear-22">エキスパートPythonプログラミング</a>』で<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>に対する知識がほぼ止まっていたのですが、どうやら最近は(かなり前から?) 「pyenv」なる便利コマンドで簡単にバージョンの切り替えを行うことができるようです。</p>

<div class="section">
    <h3>インストール</h3>
    
<pre>$ <a class="keyword" href="http://d.hatena.ne.jp/keyword/brew">brew</a> install pyenv pyenv-virtualenv
</pre><p>コマンドは環境に応じて適宜読み替えてください。<br />
インストール完了後に以下のようなメッセージが出てくると思いますので、必要ならば適宜支持されたコマンドを.<a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>_profile等に追加してください。</p>

<pre>To enable shims and autocompletion add to your profile:
  if which pyenv > /dev/null; then eval "$(pyenv init -)"; fi
</pre>
<pre>To use Homebrew's directories rather than ~/.pyenv add to your profile:
  export PYENV_ROOT=/usr/local/var/pyenv
</pre>
<pre>To enable auto-activation add to your profile:
  if which pyenv-virtualenv-init > /dev/null; then eval "$(pyenv virtualenv-init -)"; fi
</pre><p>次に、必要なバージョンをインストールします。現在なら必要なバージョンは2.7, 3.4.3, 3.5.0の3つくらいでしょうか?</p>

<pre>$ pyenv install 2.7
$ pyenv install 3.4.3
$ pyenv install 3.5.0
</pre>
</div>
<div class="section">
    <h3>使い方</h3>
    
<div class="section">
    <h4>バージョンの設定をする</h4>
    <p>ライブラリやらGAEの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>のバージョンの問題やらで、未だに特定のプロジェクトでは<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 2.7を使っている、という場合はよくあります。<br />
pyenvを使うと、「特定のディレクトリ以下ではバージョン◯◯を使う」というような設定を行うことができます。</p>

<pre>$ cd /path/to/my-python2.7-project/
$ pyenv local 2.7
</pre><p>これでこのディレクトリ以下では自動的に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 2.7が使われるようになりました。<br />
使用するバージョンの設定は、そのディレクトリ直下の.<a class="keyword" href="http://d.hatena.ne.jp/keyword/python">python</a>-versionファイルに保存されます。</p>

</div>
<div class="section">
    <h4>virtualenvの環境を設定する</h4>
    <p>通常、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>で開発を行う場合はプロジェクト毎にvirtualenvで仮想環境を作り、その中でライブラリのインストール等を行うはずです。<br />
pyenvなら、バージョンの管理だけではなく、ディレクトリ毎の仮想環境の設定も行うことができます。</p><p>新しい仮想環境を作るには、</p>

<pre>$ pyenv virtualenv (バージョン名) (仮想環境の名前)
</pre><p>というようにします。今回はGAE用に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 2.7の環境が作りたかったので、</p>

<pre>$ pyenv virtualenv 2.7 gae-project
</pre><p>としました。この環境を特定のディレクトリ以下に適用する場合には、先程と同様に</p>

<pre>$ cd hogehoge-project
$ pyenv local gae-project
</pre><p>とします。仮想環境の設定も同様に、.<a class="keyword" href="http://d.hatena.ne.jp/keyword/python">python</a>-versionに保存されます。</p>

</div>
<div class="section">
    <h4>バージョンと仮想環境の削除</h4>
    <p>インストールしたバージョンや環境を削除したい場合は、</p>

<pre>$ pyenv uninstall (バージョンor環境名)
</pre><p>と入力します。</p>

</div>
</div>

{% endraw %}
