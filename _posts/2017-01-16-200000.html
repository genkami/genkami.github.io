---
layout: post
title: Prologならではのソートアルゴリズム
tags:
- Prolog

---
{% raw %}
<p>簡単な問題なら問題を<a class="keyword" href="http://d.hatena.ne.jp/keyword/Prolog">Prolog</a>の言葉で書いてやるだけで勝手に解けてしまうのが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Prolog">Prolog</a>のすごい所です。<br />
例えばソートに関しても、(計算量とかの話に目を瞑ってしまえば)こんなに簡単に書くことができるようになります。</p>
<pre class="code lang-prolog" data-lang="prolog" data-unlink><span class="synComment">% sort.pl</span>

<span class="synComment">% remove(X, L, M) : リスト L から要素 X を先頭から1つ削除したものが M である</span>
<span class="synConstant">remove</span>(X, [X | L], L).
<span class="synConstant">remove</span>(X, [Y | L], M) <span class="synSpecial">:-</span>
    remove(X, L, N),
    M <span class="synStatement">=</span> [Y | N].

<span class="synComment">% perm(L, M) : リスト L を並べ替えたものがリスト M である</span>
<span class="synConstant">perm</span>([], []).
<span class="synConstant">perm</span>(L, [X | M]) <span class="synSpecial">:-</span>
    remove(X, L, L1),
    perm(L1, M).

<span class="synComment">% sorted(L) : リスト L はソート済みである</span>
<span class="synConstant">sorted</span>([]).
<span class="synConstant">sorted</span>([X]).
<span class="synConstant">sorted</span>([X, Y | L]) <span class="synSpecial">:-</span>
    X <span class="synStatement">=&lt;</span> Y,
    sorted([Y | L]).

<span class="synComment">% lsort(L, M) : M は L をソートしたものである</span>
<span class="synConstant">lsort</span>(L, M) <span class="synSpecial">:-</span>
    perm(L, M),
    sorted(M),
    <span class="synSpecial">!</span>.
</pre><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Prolog">Prolog</a>を知らない人のために簡単に説明すると、このコードは</p>
<pre class="code" data-lang="" data-unlink>MがLをソートしたものであるとは、
    MはLを並べ替えたもので、
    Mの各要素は昇順に並べられている
ということである。</pre><p>という定義を行っただけです。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Prolog">Prolog</a>の場合、これがソート<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%EB%A5%B4%A5%EA%A5%BA%A5%E0">アルゴリズム</a>そのものとなります。</p><p>実行結果:</p>
<pre class="code lang-prolog" data-lang="prolog" data-unlink><span class="synPreProc">?- lsort([</span><span class="synConstant">3</span><span class="synPreProc">, </span><span class="synConstant">2</span><span class="synPreProc">, </span><span class="synConstant">1</span><span class="synPreProc">], L).</span>
L <span class="synStatement">=</span> [<span class="synConstant">1</span>, <span class="synConstant">2</span>, <span class="synConstant">3</span>].

<span class="synPreProc">?- lsort([</span><span class="synConstant">3</span><span class="synPreProc">, </span><span class="synConstant">2</span><span class="synPreProc">, </span><span class="synConstant">5</span><span class="synPreProc">, </span><span class="synConstant">10</span><span class="synPreProc">, </span><span class="synConstant">4</span><span class="synPreProc">, </span><span class="synConstant">2</span><span class="synPreProc">, </span><span class="synConstant">3</span><span class="synPreProc">, </span><span class="synConstant">0</span><span class="synPreProc">], L).</span>
L <span class="synStatement">=</span> [<span class="synConstant">0</span>, <span class="synConstant">2</span>, <span class="synConstant">2</span>, <span class="synConstant">3</span>, <span class="synConstant">3</span>, <span class="synConstant">4</span>, <span class="synConstant">5</span>, <span class="synConstant">10</span>].

<span class="synPreProc">?- lsort([], L).</span>
L <span class="synStatement">=</span> [].
</pre>

{% endraw %}
