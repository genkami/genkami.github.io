---
layout: post
title: Emacsで快適なウィンドウ操作を行う
tags:
- Emacs

---
{% raw %}
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Emacs">Emacs</a>のウィンドウ周りが結構不便だったので、いい感じに簡単に操作できる関数を書いてみました。</p><p>まずは1つめ。</p>
<pre class="code lang-lisp" data-lang="lisp" data-unlink><span class="synComment">;; 空気を読んでいい感じにウィンドウを分割してくれるやつ</span>
<span class="synSpecial">(</span><span class="synStatement">defun</span> split-window-automatically <span class="synSpecial">()</span>
  <span class="synSpecial">(</span>interactive<span class="synSpecial">)</span>
  <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">&gt;</span> <span class="synSpecial">(</span>window-width<span class="synSpecial">)</span> <span class="synSpecial">(</span><span class="synStatement">*</span> <span class="synConstant">2.5</span> <span class="synSpecial">(</span>window-height<span class="synSpecial">)))</span>
      <span class="synSpecial">(</span>split-window-horizontally<span class="synSpecial">)</span>
    <span class="synSpecial">(</span>split-window-vertically<span class="synSpecial">)))</span>
<span class="synSpecial">(</span>global-set-key <span class="synSpecial">(</span>kbd <span class="synConstant">&quot;C-x w&quot;</span><span class="synSpecial">)</span> <span class="synSpecial">'</span><span class="synIdentifier">split-window-automatically</span><span class="synSpecial">)</span>
</pre><p>コメントの通り空気を読んでいい感じにウィンドウを分割してくれます。具体的に言うと、現在のウィンドウが縦長だった場合は縦に、横長だった場合は横にウィンドウを分割するようになっています。<br />
これでもうC-xと打ったあとに「あれ、次に打つの2と3のどっちだっけ？」と一瞬悩む必要もなくなります。</p><br />
<p>2つめ。</p>
<pre class="code lang-lisp" data-lang="lisp" data-unlink><span class="synComment">;; ウィンドウが上のほうにあれば縦に縮小し、下のほうにあれば縦に拡大する</span>
<span class="synSpecial">(</span><span class="synStatement">defun</span> resize-window-up <span class="synSpecial">()</span>
  <span class="synSpecial">(</span>interactive<span class="synSpecial">)</span>
  <span class="synSpecial">(</span><span class="synStatement">let*</span> <span class="synSpecial">((</span>edges <span class="synSpecial">(</span>window-edges <span class="synSpecial">(</span>selected-window<span class="synSpecial">)))</span>
         <span class="synSpecial">(</span>end-y <span class="synSpecial">(</span><span class="synStatement">cadddr</span> edges<span class="synSpecial">)))</span>
    <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">&lt;</span> end-y <span class="synSpecial">(</span>frame-height<span class="synSpecial">))</span>
        <span class="synSpecial">(</span>shrink-window <span class="synConstant">1</span><span class="synSpecial">)</span>
      <span class="synSpecial">(</span>enlarge-window <span class="synConstant">1</span><span class="synSpecial">))))</span>

<span class="synComment">;; ウィンドウが上のほうにあれば縦に拡大し、下のほうにあれば縦に縮小する</span>
<span class="synSpecial">(</span><span class="synStatement">defun</span> resize-window-down <span class="synSpecial">()</span>
  <span class="synSpecial">(</span>interactive<span class="synSpecial">)</span>
  <span class="synSpecial">(</span><span class="synStatement">let*</span> <span class="synSpecial">((</span>edges <span class="synSpecial">(</span>window-edges <span class="synSpecial">(</span>selected-window<span class="synSpecial">)))</span>
         <span class="synSpecial">(</span>end-y <span class="synSpecial">(</span><span class="synStatement">cadddr</span> edges<span class="synSpecial">)))</span>
    <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">&lt;</span> end-y <span class="synSpecial">(</span>frame-height<span class="synSpecial">))</span>
        <span class="synSpecial">(</span>enlarge-window <span class="synConstant">1</span><span class="synSpecial">)</span>
      <span class="synSpecial">(</span>shrink-window <span class="synConstant">1</span><span class="synSpecial">))))</span>

<span class="synComment">;; ウィンドウが左のほうにあれば横に拡大し、右のほうにあれば横に縮小する</span>
<span class="synSpecial">(</span><span class="synStatement">defun</span> resize-window-right <span class="synSpecial">()</span>
  <span class="synSpecial">(</span>interactive<span class="synSpecial">)</span>
  <span class="synSpecial">(</span><span class="synStatement">let*</span> <span class="synSpecial">((</span>edges <span class="synSpecial">(</span>window-edges <span class="synSpecial">(</span>selected-window<span class="synSpecial">)))</span>
         <span class="synSpecial">(</span>end-x <span class="synSpecial">(</span><span class="synStatement">caddr</span> edges<span class="synSpecial">)))</span>
    <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">&lt;</span> end-x <span class="synSpecial">(</span>frame-width<span class="synSpecial">))</span>
        <span class="synSpecial">(</span>enlarge-window-horizontally <span class="synConstant">1</span><span class="synSpecial">)</span>
      <span class="synSpecial">(</span>shrink-window-horizontally <span class="synConstant">1</span><span class="synSpecial">))))</span>

<span class="synComment">;; ウィンドウが左のほうにあれば横に縮小し、右のほうにあれば横に拡大する</span>
<span class="synSpecial">(</span><span class="synStatement">defun</span> resize-window-left <span class="synSpecial">()</span>
  <span class="synSpecial">(</span>interactive<span class="synSpecial">)</span>
  <span class="synSpecial">(</span><span class="synStatement">let*</span> <span class="synSpecial">((</span>edges <span class="synSpecial">(</span>window-edges <span class="synSpecial">(</span>selected-window<span class="synSpecial">)))</span>
         <span class="synSpecial">(</span>end-x <span class="synSpecial">(</span><span class="synStatement">caddr</span> edges<span class="synSpecial">)))</span>
    <span class="synSpecial">(</span><span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">&lt;</span> end-x <span class="synSpecial">(</span>frame-width<span class="synSpecial">))</span>
        <span class="synSpecial">(</span>shrink-window-horizontally <span class="synConstant">1</span><span class="synSpecial">)</span>
      <span class="synSpecial">(</span>enlarge-window-horizontally <span class="synConstant">1</span><span class="synSpecial">))))</span>

<span class="synSpecial">(</span>global-set-key <span class="synSpecial">(</span>kbd <span class="synConstant">&quot;&lt;M-up&gt;&quot;</span><span class="synSpecial">)</span> <span class="synSpecial">'</span><span class="synIdentifier">resize-window-up</span><span class="synSpecial">)</span>
<span class="synSpecial">(</span>global-set-key <span class="synSpecial">(</span>kbd <span class="synConstant">&quot;&lt;M-down&gt;&quot;</span><span class="synSpecial">)</span> <span class="synSpecial">'</span><span class="synIdentifier">resize-window-down</span><span class="synSpecial">)</span>
<span class="synSpecial">(</span>global-set-key <span class="synSpecial">(</span>kbd <span class="synConstant">&quot;&lt;M-right&gt;&quot;</span><span class="synSpecial">)</span> <span class="synSpecial">'</span><span class="synIdentifier">resize-window-right</span><span class="synSpecial">)</span>
<span class="synSpecial">(</span>global-set-key <span class="synSpecial">(</span>kbd <span class="synConstant">&quot;&lt;M-left&gt;&quot;</span><span class="synSpecial">)</span> <span class="synSpecial">'</span><span class="synIdentifier">resize-window-left</span><span class="synSpecial">)</span>
</pre><p>M-(矢印キー)でいい感じにウィンドウをリサイズしてくれます。<br />
これでもうC-x ^とかC-x {みたいな頭のおかしい<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AD%A1%BC%A5%D0%A5%A4%A5%F3%A5%C9">キーバインド</a>に悩まされることもありません。</p>


{% endraw %}
