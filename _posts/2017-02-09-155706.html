---
layout: post
title: Coqで型クラス
tags:
- Coq

---
{% raw %}
<p>Coqにも型クラスがあるらしいです。</p>
<pre class="code" data-lang="" data-unlink>Class Ord a :=
  {
    le : a -&gt; a -&gt; bool
  }.</pre><p>これでleというメソッドを持つ型クラスOrdを定義できます。</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>定義は以下のように行います。</p>
<pre class="code" data-lang="" data-unlink>Fixpoint le_nat (n m : nat) : bool :=
  match n, m with
    | O, O =&gt; true
    | O, S _ =&gt; true
    | S _, O =&gt; false
    | S n&#39;, S m&#39; =&gt; le_nat n&#39; m&#39;
  end.

Instance nat_ord : Ord nat :=
  {
    le := le_nat
  }.</pre><p>複数の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>を定義することもできます。</p>
<pre class="code" data-lang="" data-unlink>Instance nat_rev_ord : Ord nat :=
  {
    le := fun x y =&gt; le_nat y x
  }.</pre><p>どの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>を選択するかは、</p>
<pre class="code" data-lang="" data-unlink>@le nat nat_rev_ord</pre><p>のように明示的に与えてやればOKです。</p><p>Coqにはそもそも暗黙引数があるので、型クラスがあるからと言って無い場合に比べてめちゃくちゃ便利になるかと言われるとそういうことも無さそうです。暗黙引数でレコード型を渡すのと書き方的にもそんなに変わりません。</p>


{% endraw %}
