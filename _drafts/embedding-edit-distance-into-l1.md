---
layout: post
title: 編集距離をL1に埋め込む
tags:
- Algorithm
use_mathjax: true
---



## 参考

[Low Distortion Embeddings for Edit Distance](http://web.cs.ucla.edu/~rafail/PUBLIC/68.pdf)


shifts(x, s) = {x[1, |x| - s + 1], x[2, |x| - s + 2], ..., x[s, |x|]}
ってことは、xの部分列で長さがs - 1のもの全体の集合

Lemma 5. Let x, y ∈ {0, 1}^* such that |x| <= |y|, and let b <- N, b < |x|. Then, there exists an injection
f : [|x| - b : 1] -> [|y| - b + 1]
|{z <- shifts(x[(i - 1)b + 1, ib], s) | ed(z, τi(z)) > ki}| <= ed(x, y)

こっちについても

1': \sum_{i = 1}^{d/b} k_i <= 2ed(x, y)
2': |...| <= 2ed(x, y)

とおくと、
1と1', 2と2'の間には対応関係がありそう

具体的にはどういう関係なんだろう
よく見ると、1と1'では不等号が逆
対応関係があるって言ったけど、具体的にはどんな関係なんだろう
というか、むしろ先に本題に入ったほうがいいんじゃないかって木もする
気もする

本題ってなんだったっけ
たしか後のAndoni and Onakの論文に書いてた感じだと、二段階に変換をかけてそこそこ次元の少ないl1に移すとかの話だったはず

各段階がそれぞれlemma 5, 6に対応してるとか？？

よくわからんけど
どっちかっていうと、中でどんなふうにこれが使われているか見るのがはやそう
もしかしたらlemma5はlemma6の証明のためだけに存在してるかもしれないし

lemma6ちら見したらlemma5が証明に使われてた
\tau_iがlemma 5のfに相当してるとか？
あんまちゃんと見てないけど
あーでもf(i)は添字をずらすけど、τiはshiftsの写像だから？？？

fは[|x| - b + 1] -> [|y| - b + 1]の写像で、
τiはshifts(x[(i - 1)b + 1, ib], s) -> shifts(y[(i - 1)b + 1, ib], s)
fは1...|x|-b+1から1...|y|-b+1の写像で、
τiはx[...]のs文字の部分文字列から、y[...]のs文字の部分文字列への写像
もしかして、fでいうbはτiでいうs?
じゃあもし対応付けるとしたら？

shifts(x...)とshifts(y...)を適当に整列して、i番目のものをf(i)番目に対応付けるとか？
するとどうなる？
それをすると、

たとえば、fについてτi(x[]) = x[][i, ...]にするとしたら？
ed(z, τi(z))は？
ed(z, τi(z)) > ki
\sum_{i = 1}^{d/b} k_i <= 2ed(x, y)
ed(x[i, i + b - 1], y[f(i), f(i) + b - 1]) > 2ed(x, y)

上2つが最後のやつに何か対応しているはず
まあ計算するだけやし、証明追ってみるか

Lemma 5.
Let I = {i <- [|x| - b + 1] : f_{x,y}(i) <- [|y| - b + 1]}
Iは実際の編集距離に対応している中で、編集後も[|y| - b + 1]の中にあるやつ
だから、最初にxの頭の方にあったのに、最後はyの後ろとかにあるやつは除外される
Put i_{max} = \max {i <- [|x| - b + 1] : forall j <- [i], f_{x, y}(j) <- [|y| - b + 1] \/ f_{x,y}(j) =  ε}
これはどういうこと？？
maxの引数はIよりも大きい集合
でもないのか？
1...iのすべての範囲でf(j) <- [] or f(j) = ε
になるようなiの最大値
ということは


ed(x[i, i+b-1], y[f(i), f(i)+b-1]) <= 2ed(x, y)
が本質っぽい？
てことは、この時点でのf(i)が[|y| - b + 1]に収まっている物の数がed(x, y)個以上っていうこと？

|I| > ed(x, y) で、I -> i について ed(x[i,..], y[f(i),...]) <= 2ed になるのか？

これはどういうこと？
たとえば編集距離n=|x|=|y|とかだったら？
f_{xy}(i) = \epsilion for all i
|I| = {i <- [|x|-b+1] | f_xy(i) <- [|y|-b+1]}
= {}
f_{xy}(i) = \epsilon なので
ということは、|I| = 0 !> ed(x, y)

そもそもなんで|I| > ed(x, y) って推測したんだっけ
論文の式では
|I| >= |x| - b + 1 - ed(x, y)
が導かれてる
これは
|I| = |εにならないやつ| - |[|y|-b+2]に収まらないやつ|
の計算結果

for every i <- I, put f(i) = f_{x,y}(i) and extend f arbitrarily to [|x| - b + 1]. We show that for every i <- I, ed(x[i,..], y[f(i)...]) <= 2ed(e, y)

とあるから、I = {} でも問題ない？そのときはf(i)はランダムに単射になるように結びつけられた何か、程度のものになるはず。

このとき、
{i <- [|x|-b+1] | ed(x[i,..], y[f(i),..]) > 2ed(x, y)}.size <= ed(x, y)
このとき、さっき定義したf(i)については、
0 <= |{i <- ...}| <= [|x| - b + 1] <= |x| = ed(x, y)
となる
また、たとえばed(x, y) = 0, すなわち x = y のとき、
f(i) = f_{x, y}(i) for all i
となり、さらに
ed(x[i,..], y[f(i),..]) = 0 <= 2ed(x, y)
となるので、
|{i <- ...}| = 0 <= ed(x, y) = 0
となる

ということは、肝心なのは、
Iに入ってるiについて、ed(...) <= 2ed(x, y) となること

そこの証明が5ページの一番下から

